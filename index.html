<!DOCTYPE html>
<html lang="am">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MULE TECH | Premium Portal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .hidden { display: none; }
        #wheel-container { position: relative; width: 300px; height: 300px; margin: 10px auto; }
        #wheel { width: 100%; height: 100%; border-radius: 50%; border: 5px solid #1E40AF; transition: transform 5s cubic-bezier(0.15, 0, 0.15, 1); }
        .v-container { position: relative; width: 100%; }
        .v-input { width: 100%; padding: 12px; border: 2px solid #cbd5e1; border-radius: 10px; outline: none; background: #fff; font-size: 13px; transition: 0.3s; }
        .v-valid { border-color: #10b981 !important; }
        .v-invalid { border-color: #ef4444 !important; }
        .check-mark { position: absolute; right: 12px; top: 50%; transform: translateY(-50%); color: #10b981; display: none; font-weight: bold; }
        .gold-header { color: #FFD700; font-weight: 900; font-size: 2.2rem; text-transform: uppercase; text-align: center; text-shadow: 2px 2px #000; }
        .pointer { position: absolute; top: -15px; left: 50%; transform: translateX(-50%); width: 0; height: 0; border-left: 15px solid transparent; border-right: 15px solid transparent; border-top: 30px solid #ef4444; z-index: 20; }
        .btn-link { background: #10b981; color: white; padding: 10px; border-radius: 8px; font-weight: bold; display: block; text-align: center; margin-bottom: 5px; }
    </style>
</head>
<body class="bg-slate-100 min-h-screen flex items-center justify-center p-2 font-sans">

    <div class="max-w-md w-full bg-white rounded-[2rem] shadow-2xl p-5 border-t-[8px] border-blue-700 relative">
        
        <div class="absolute top-4 right-4">
            <select id="lang-selector" onchange="applyLanguage(this.value)" class="text-xs bg-gray-50 border border-gray-300 rounded p-1 outline-none">
                <option value="am">áŠ áˆ›áˆ­áŠ›</option>
                <option value="en">English</option>
            </select>
        </div>

        <div class="text-center mb-4 pt-4">
            <h1 class="gold-header">MULE TECH</h1>
        </div>

        <div id="page1" class="space-y-3">
            <h2 id="t-reg-title" class="font-bold text-center text-slate-700 text-sm">ğŸ‘¤ á‹¨áŒáˆ áˆ˜áˆ¨áŒƒá‹áŠ• á‹«áˆµáŒˆá‰¡</h2>
            <div class="space-y-3 max-h-[60vh] overflow-y-auto px-1">
                <div class="v-container"><input type="text" id="fname" placeholder="á‹¨áˆ˜áŒ€áˆ˜áˆªá‹« áˆµáˆ *" class="v-input" oninput="validate(this, 'name')"><span class="check-mark">âœ…</span></div>
                <div class="v-container"><input type="text" id="mname" placeholder="á‹¨áŠ á‰£á‰µ áˆµáˆ *" class="v-input" oninput="validate(this, 'name')"><span class="check-mark">âœ…</span></div>
                <div class="v-container"><input type="text" id="lname" placeholder="á‹¨áŠ á‹«á‰µ áˆµáˆ *" class="v-input" oninput="validate(this, 'name')"><span class="check-mark">âœ…</span></div>
                
                <select id="gender" class="v-input" onchange="validate(this, 'select')">
                    <option value="" id="t-gender-opt">áŒ¾á‰³ á‹­áˆáˆ¨áŒ¡ *</option>
                    <option value="á‹ˆáŠ•á‹µ" id="t-male">á‹ˆáŠ•á‹µ</option>
                    <option value="áˆ´á‰µ" id="t-female">áˆ´á‰µ</option>
                </select>

                <div class="v-container"><input type="text" id="phone" placeholder="á‹¨áŠ¥áˆ­áˆµá‹ áˆµáˆáŠ­ (10 digit) *" maxlength="10" class="v-input" oninput="validate(this, 'phone')"><span class="check-mark">âœ…</span></div>
                <div class="v-container"><input type="email" id="email" placeholder="example@gmail.com *" class="v-input" oninput="validate(this, 'email')"><span class="check-mark">âœ…</span></div>
                
                <hr>
                <p id="t-emergency" class="text-[10px] font-bold text-blue-600">á‰°áŒ áˆª (Emergency Contact)</p>
                <div class="v-container"><input type="text" id="ename" placeholder="á‹¨á‰°áŒ áˆª áˆµáˆ *" class="v-input" oninput="validate(this, 'name')"><span class="check-mark">âœ…</span></div>
                <div class="v-container"><input type="text" id="ephone" placeholder="á‹¨á‰°áŒ áˆª áˆµáˆáŠ­ (10 digit) *" maxlength="10" class="v-input" oninput="validate(this, 'phone')"><span class="check-mark">âœ…</span></div>
                
                <div class="flex items-center gap-2 p-2">
                    <input type="checkbox" id="rule-check"> <label id="t-rules" class="text-[10px]">á‰  MULE TECH áˆ…áŒá‰½ á‰°áˆµáˆ›áˆá‰»áˆˆáˆá¢</label>
                </div>
            </div>
            <button onclick="nav(1, 2)" id="t-next1" class="w-full bg-blue-700 text-white py-3 rounded-xl font-bold">á‰€áŒ¥áˆ (Next) â¡ï¸</button>
        </div>

        <div id="page2" class="hidden text-center">
            <button onclick="nav(2, 1)" class="text-blue-700 text-xs font-bold mb-2 flex items-center">â¬…ï¸ <span class="t-back">á‰°áˆ˜áˆˆáˆµ</span></button>
            <h2 id="t-wheel-title" class="font-bold text-blue-800 text-sm mb-2">ğŸ¡ áŠ¥á‹µáˆá‹áŠ• á‹­áˆáŠ­áˆ©</h2>
            <div id="wheel-container"><div class="pointer"></div><canvas id="wheel"></canvas></div>
            
            <div id="spin-result-box" class="hidden mt-4 space-y-3 bg-blue-50 p-4 rounded-xl border border-blue-200">
                <p id="t-result-label" class="text-sm font-bold text-blue-800">á‹¨á‹°áˆ¨áˆ°á‹á‰µ á‹áŒ¤á‰µá¡</p>
                <input type="text" id="user-spin-input" class="v-input text-center font-bold text-blue-900" readonly>
                
                <div id="action-links" class="mt-2">
                    <a id="tg-btn" href="https://t.me/muletechreact" target="_blank" class="btn-link hidden">Telegram Link</a>
                    <a id="yt-btn" href="https://youtube.com/@muletechreact" target="_blank" class="btn-link hidden">YouTube Link</a>
                </div>

                <div id="winner-msg" class="hidden bg-green-100 p-3 rounded-lg text-green-800 font-bold text-xs">
                    áŠ¥áŠ•áŠ³áŠ• á‹°áˆµ áŠ áˆˆáˆ…! á‰µáˆáˆ…áˆ­á‰± á‰ á‰…áˆ­á‰¥ á‹­áŒ€áˆáˆ«áˆá¢ (Congratulations! Class starts soon.)
                </div>

                <button id="final-btn" onclick="handleSpinResult()" class="w-full bg-green-600 text-white py-3 rounded-xl font-bold t-confirm">áŠ áˆ¨áŒ‹áŒáŒ¥áŠ“ á‰€áŒ¥áˆ</button>
            </div>

            <button id="spin-btn" onclick="spinNow()" class="w-full bg-blue-700 text-white py-3 rounded-xl font-bold t-spin">áŠ áˆ½áŠ¨áˆ­áŠ­áˆ­ (SPIN) ğŸŒ€</button>
        </div>

        <div id="page3" class="hidden space-y-4">
            <button onclick="nav(3, 1)" class="text-blue-700 text-xs font-bold mb-2 flex items-center">â¬…ï¸ <span class="t-back">á‰°áˆ˜áˆˆáˆµ</span></button>
            <h2 id="t-course-title" class="text-center font-bold text-blue-900 mb-4">áŠ®áˆ­áˆµ á‹­áˆáˆ¨áŒ¡ (Select Course)</h2>
            <select id="course-dropdown" onchange="showNextBtn()" class="v-input">
                <option value="" id="t-course-opt">-- áŠ®áˆ­áˆµ á‹­áˆáˆ¨áŒ¡ --</option>
                <option value="Video Editing">Video Editing - 400 ETB</option>
                <option value="Graphics Design">Graphics Design - 400 ETB</option>
                <option value="Free Internet Config">Free Internet Config - 400 ETB</option>
                <option value="Social Media Management">Social Media Management - 500 ETB</option>
            </select>
            <button id="to-pay" onclick="nav(3, 4)" class="hidden w-full bg-orange-500 text-white py-3 rounded-xl font-bold">á‰€áŒ¥áˆ (Next) â¡ï¸</button>
        </div>

        <div id="page4" class="hidden space-y-4">
            <button onclick="nav(4, 3)" class="text-blue-700 text-xs font-bold mb-2 flex items-center">â¬…ï¸ <span class="t-back">á‰°áˆ˜áˆˆáˆµ</span></button>
            <h2 id="t-pay-title" class="text-center font-bold text-blue-900">á‹¨áŠ­áá‹« áŠ áˆ›áˆ«áŒ­ (Payment)</h2>
            <div id="t-pay-note" class="bg-orange-50 p-3 rounded-lg text-[11px] text-orange-800 border text-center">áˆ˜áŒ€áˆ˜áˆªá‹« á‹­áŠ­áˆáˆ‰ áŠ¨á‹šá‹« ID á‹­áˆ°áŒ¥á‹á‰³áˆá¢</div>
            <select id="bank-selector" class="v-input border-blue-600">
                <option value="" id="t-bank-opt">-- á‰£áŠ•áŠ­ á‹­áˆáˆ¨áŒ¡ --</option>
                <option value="Abyssinia - 231006718">Abyssinia Bank (231006718)</option>
                <option value="Telebirr - 0927275152">Telebirr (0927275152)</option>
                <option value="CBE - 1000745084773">CBE (1000745084773)</option>
            </select>
            <button onclick="generateID()" class="w-full bg-blue-700 text-white py-3 rounded-xl font-bold t-confirm">áŠ áˆ¨áŒ‹áŒáŒ¥ ğŸ†”</button>
        </div>

        <div id="page5" class="hidden text-center space-y-6">
            <div class="bg-green-50 p-6 rounded-3xl border-2 border-dashed border-green-500">
                <p id="t-id-label" class="text-xs text-green-700 mb-2">á‹¨áŠ¥áˆ­áˆµá‹ á‹¨áŠ­áá‹« áˆ˜áˆˆá‹« (Your ID)</p>
                <h3 id="final-id" class="text-3xl font-black text-green-800 tracking-widest"></h3>
            </div>
            <button onclick="location.reload()" class="w-full bg-green-600 text-white py-4 rounded-xl font-bold">áŒ¨áˆ­áˆ»áˆˆáˆ (Finish) ğŸš€</button>
        </div>
    </div>

    <script>
        let spinResult = "";
        const mainCourses = ["Video Editing", "Graphics Design", "Free Internet Config", "Social Media Management"];
        const items = [
            "Subscribe YouTube", "Video Editing", "Subscribe YouTube", "Join Telegram",
            "Subscribe YouTube", "Graphics Design", "Subscribe YouTube", "Join Telegram",
            "Subscribe YouTube", "Free Internet Config", "Subscribe YouTube", "Join Telegram",
            "Subscribe YouTube", "Social Media Management", "Subscribe YouTube", "Join Telegram"
        ];

        const dict = {
            am: {
                reg: "ğŸ‘¤ á‹¨áŒáˆ áˆ˜áˆ¨áŒƒá‹áŠ• á‹«áˆµáŒˆá‰¡", gender: "áŒ¾á‰³ á‹­áˆáˆ¨áŒ¡ *", male: "á‹ˆáŠ•á‹µ", female: "áˆ´á‰µ", emergency: "á‰°áŒ áˆª (Emergency Contact)", rules: "á‰  MULE TECH áˆ…áŒá‰½ á‰°áˆµáˆ›áˆá‰»áˆˆáˆá¢",
                next: "á‰€áŒ¥áˆ (Next) â¡ï¸", back: "á‰°áˆ˜áˆˆáˆµ", wheel: "ğŸ¡ áŠ¥á‹µáˆá‹áŠ• á‹­áˆáŠ­áˆ©", spin: "áŠ áˆ½áŠ¨áˆ­áŠ­áˆ­ (SPIN) ğŸŒ€", result: "á‹¨á‹°áˆ¨áˆ°á‹á‰µ á‹áŒ¤á‰µá¡", confirm: "áŠ áˆ¨áŒ‹áŒáŒ¥áŠ“ á‰€áŒ¥áˆ",
                courseT: "áŠ®áˆ­áˆµ á‹­áˆáˆ¨áŒ¡", courseO: "-- áŠ®áˆ­áˆµ á‹­áˆáˆ¨áŒ¡ --", payT: "á‹¨áŠ­áá‹« áŠ áˆ›áˆ«áŒ­", payN: "áˆ˜áŒ€áˆ˜áˆªá‹« á‹­áŠ­áˆáˆ‰ áŠ¨á‹šá‹« ID á‹­áˆ°áŒ¥á‹á‰³áˆá¢", bankO: "-- á‰£áŠ•áŠ­ á‹­áˆáˆ¨áŒ¡ --", idL: "á‹¨áŠ¥áˆ­áˆµá‹ á‹¨áŠ­áá‹« áˆ˜áˆˆá‹« (Your ID)"
            },
            en: {
                reg: "ğŸ‘¤ Enter Personal Info", gender: "Select Gender *", male: "Male", female: "Female", emergency: "Emergency Contact", rules: "I agree to MULE TECH rules.",
                next: "Next â¡ï¸", back: "Back", wheel: "ğŸ¡ Try Your Luck", spin: "SPIN ğŸŒ€", result: "Result:", confirm: "Confirm & Continue",
                courseT: "Select Course", courseO: "-- Select Course --", payT: "Payment Option", payN: "Pay first, then you get your ID.", bankO: "-- Select Bank --", idL: "Your Payment ID"
            }
        };

        function applyLanguage(l) {
            const d = dict[l];
            document.getElementById('t-reg-title').innerText = d.reg;
            document.getElementById('t-gender-opt').innerText = d.gender;
            document.getElementById('t-male').innerText = d.male;
            document.getElementById('t-female').innerText = d.female;
            document.getElementById('t-emergency').innerText = d.emergency;
            document.getElementById('t-rules').innerText = d.rules;
            document.getElementById('t-next1').innerText = d.next;
            document.querySelectorAll('.t-back').forEach(el => el.innerText = d.back);
            document.getElementById('t-wheel-title').innerText = d.wheel;
            document.querySelectorAll('.t-spin').forEach(el => el.innerText = d.spin);
            document.getElementById('t-result-label').innerText = d.result;
            document.querySelectorAll('.t-confirm').forEach(el => el.innerText = d.confirm);
            document.getElementById('t-course-title').innerText = d.courseT;
            document.getElementById('t-course-opt').innerText = d.courseO;
            document.getElementById('t-pay-title').innerText = d.payT;
            document.getElementById('t-pay-note').innerText = d.payN;
            document.getElementById('t-bank-opt').innerText = d.bankO;
            document.getElementById('t-id-label').innerText = d.idL;
        }

        function validate(el, type) {
            let isValid = false;
            const val = el.value.trim();
            if (type === 'name') isValid = val.length >= 3;
            if (type === 'phone') isValid = /^[0-9]{10}$/.test(val);
            if (type === 'email') isValid = val.toLowerCase().endsWith('@gmail.com') && val.length > 10;
            if (type === 'select') isValid = val !== "";

            if (isValid) {
                el.classList.add('v-valid'); el.classList.remove('v-invalid');
                if (el.nextElementSibling) el.nextElementSibling.style.display = 'block';
            } else {
                el.classList.add('v-invalid'); el.classList.remove('v-valid');
                if (el.nextElementSibling) el.nextElementSibling.style.display = 'none';
            }
        }

        function nav(f, t) {
            if (f === 1) {
                const inputs = document.querySelectorAll('#page1 .v-input');
                let allOk = true;
                inputs.forEach(i => { if(!i.classList.contains('v-valid')) allOk = false; });
                if(!allOk || !document.getElementById('rule-check').checked) {
                    alert("áŠ¥á‰£áŠ­á‹ áˆ˜áˆ¨áŒƒá‹áŠ• á‰ á‰µáŠ­áŠ­áˆ á‹­áˆ™áˆ‰!"); return;
                }
                // Check if already spun - SKIP Page 2
                if(localStorage.getItem('mule_tech_played')) {
                    document.querySelectorAll('[id^="page"]').forEach(p => p.classList.add('hidden'));
                    document.getElementById('page3').classList.remove('hidden');
                    return;
                }
            }
            document.querySelectorAll('[id^="page"]').forEach(p => p.classList.add('hidden'));
            document.getElementById('page'+t).classList.remove('hidden');
        }

        const canvas = document.getElementById('wheel');
        const ctx = canvas.getContext('2d');
        function drawWheel() {
            const arc = (Math.PI * 2) / items.length;
            canvas.width = 300; canvas.height = 300;
            items.forEach((item, i) => {
                ctx.beginPath(); ctx.fillStyle = i % 2 === 0 ? '#1E40AF' : '#3B82F6';
                ctx.moveTo(150, 150); ctx.arc(150, 150, 145, i * arc, (i + 1) * arc); ctx.fill();
                ctx.save(); ctx.translate(150, 150); ctx.rotate(i * arc + arc / 2);
                ctx.fillStyle = "white"; ctx.font = "bold 8px Arial"; ctx.fillText(item, 50, 5); ctx.restore();
            });
        }
        drawWheel();

        function spinNow() {
            // Save spin state immediately
            localStorage.setItem('mule_tech_played', 'true');
            const btn = document.getElementById('spin-btn');
            btn.disabled = true; btn.style.opacity = "0.5";
            const deg = 3600 + Math.random() * 3600;
            canvas.style.transform = `rotate(${deg}deg)`;
            setTimeout(() => {
                const idx = items.length - 1 - Math.floor((deg % 360) / (360 / items.length));
                spinResult = items[idx];
                document.getElementById('user-spin-input').value = spinResult;
                document.getElementById('spin-result-box').classList.remove('hidden');
                btn.classList.add('hidden');
                if(mainCourses.includes(spinResult)) {
                    document.getElementById('winner-msg').classList.remove('hidden');
                    document.getElementById('final-btn').innerText = "áŠ áˆ¨áŒ‹áŒáŒ¥áŠ“ áŒ¨áˆ­áˆµ (Finish)";
                } else {
                    if(spinResult === "Join Telegram") document.getElementById('tg-btn').classList.remove('hidden');
                    if(spinResult === "Subscribe YouTube") document.getElementById('yt-btn').classList.remove('hidden');
                }
            }, 5000);
        }

        function handleSpinResult() {
            if(mainCourses.includes(spinResult)) {
                sendToTelegram("FREE_WINNER");
                alert("áˆ˜áˆ¨áŒƒá‹ á‰°á‰€áˆáŒ§áˆ! á‰ á‰…áˆ­á‰¡ áŠ¥áŠ“áŒˆáŠá‹á‰³áˆˆáŠ•á¢"); location.reload();
            } else { nav(2, 3); }
        }

        function showNextBtn() { document.getElementById('to-pay').classList.remove('hidden'); }

        function generateID() {
            if(!document.getElementById('bank-selector').value) return alert("á‰£áŠ•áŠ­ á‹­áˆáˆ¨áŒ¡!");
            const id = "MT-" + Math.floor(10000 + Math.random() * 90000);
            document.getElementById('final-id').innerText = id;
            sendToTelegram(id);
            nav(4, 5);
        }

        function sendToTelegram(status) {
            const report = `ğŸš€ **MULE-TECH REPORT**\n` +
                `ğŸ‘¤ Name: ${document.getElementById('fname').value} ${document.getElementById('mname').value} ${document.getElementById('lname').value}\n` +
                `ğŸ“ Phone: ${document.getElementById('phone').value}\n` +
                `ğŸ“§ Email: ${document.getElementById('email').value}\n` +
                `ğŸš¨ Emergency: ${document.getElementById('ename').value} (${document.getElementById('ephone').value})\n` +
                `ğŸ¡ Spin: ${spinResult}\n` +
                `ğŸ“š Course: ${document.getElementById('course-dropdown').value || 'FREE'}\n` +
                `ğŸ†” ID: ${status}\n` +
                `ğŸ¦ Bank: ${document.getElementById('bank-selector').value}`;
            fetch(`https://api.telegram.org/bot8477843612:AAFQxTf8e5XuVTVOvWPUK9AlMY2KsqwBiDc/sendMessage?chat_id=1312047180&text=${encodeURIComponent(report)}`);
        }
    </script>
</body>
</html>
