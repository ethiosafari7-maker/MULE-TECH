<!DOCTYPE html>
<html lang="am">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MULE TECH | Premium Portal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script type="text/javascript">
        (function() {
            emailjs.init("Ny-PiYLDtBDV_q8An"); 
        })();
    </script>
    <style>
        .hidden { display: none; }
        #wheel-container { position: relative; width: 260px; height: 260px; margin: 10px auto; }
        #wheel { width: 100%; height: 100%; border-radius: 50%; border: 5px solid #1E40AF; transition: transform 5s cubic-bezier(0.15, 0, 0.15, 1); }
        .v-input { width: 100%; padding: 10px; border: 2px solid #ef4444; border-radius: 10px; outline: none; background: #fef2f2; font-size: 13px; }
        .v-valid { border-color: #10b981 !important; background: #f0fdf4 !important; }
        .gold-header { color: #FFD700; font-weight: 900; font-size: 2.2rem; text-transform: uppercase; text-align: center; }
        .note-box { background: #fffbeb; border: 1px solid #fcd34d; padding: 10px; border-radius: 8px; font-size: 11px; font-weight: bold; text-align: center; }
        .support-link { color: #3b82f6; font-weight: bold; text-decoration: underline; }
    </style>
</head>
<body class="bg-slate-100 min-h-screen flex items-center justify-center p-2 font-sans">

    <div class="max-w-md w-full bg-white rounded-[2rem] shadow-2xl p-5 border-t-[8px] border-blue-700">
        
        <div class="text-center mb-3">
            <h1 class="gold-header">MULE TECH</h1>
            <select id="lang-selector" onchange="applyLanguage(this.value)" class="mt-2 bg-blue-50 text-blue-800 font-bold p-1 rounded text-xs border outline-none">
                <option value="am">áŠ áˆ›áˆ­áŠ› (Amharic)</option>
                <option value="en">English</option>
            </select>
        </div>

        <div id="page1" class="space-y-3">
            <h2 id="t-reg" class="font-bold text-center text-slate-700 text-sm">ğŸ‘¤ á‹¨áŒáˆ áˆ˜áˆ¨áŒƒá‹áŠ• á‹«áˆµáŒˆá‰¡</h2>
            <div class="space-y-2 max-h-[50vh] overflow-y-auto px-1">
                <input type="text" id="fname" placeholder="á‹¨áˆ˜áŒ€áˆ˜áˆªá‹« áˆµáˆ *" class="v-input" oninput="validate(this, 'name')">
                <input type="text" id="mname" placeholder="á‹¨áŠ á‰£á‰µ áˆµáˆ *" class="v-input" oninput="validate(this, 'name')">
                <input type="text" id="lname" placeholder="á‹¨áŠ á‹«á‰µ áˆµáˆ *" class="v-input" oninput="validate(this, 'name')">
                <div class="flex gap-2">
                    <input type="number" id="age" placeholder="áŠ¥á‹µáˆœ" class="v-input w-1/3" oninput="validate(this, 'age')">
                    <select id="gender" class="v-input w-2/3 bg-white" onchange="this.classList.add('v-valid')">
                        <option value="" id="t-gen-label">á†á‰³</option>
                        <option value="Male" id="t-male">á‹ˆáŠ•á‹µ</option>
                        <option value="Female" id="t-female">áˆ´á‰µ</option>
                    </select>
                </div>
                <input type="email" id="email" placeholder="áŠ¢áˆœáˆ *" class="v-input" oninput="validate(this, 'email')">
                <input type="text" id="phone" placeholder="áˆµáˆáŠ­ á‰áŒ¥áˆ­ *" maxlength="10" class="v-input" oninput="validate(this, 'phone')">
                <p id="t-em-title" class="text-[9px] font-bold text-blue-600 uppercase pt-2">á‰°áŒ áˆª (Emergency Contact)</p>
                <input type="text" id="ename" placeholder="á‹¨á‰°áŒ áˆª áˆµáˆ *" class="v-input" oninput="validate(this, 'name')">
                <input type="text" id="ephone" placeholder="á‹¨á‰°áŒ áˆª áˆµáˆáŠ­ *" maxlength="10" class="v-input" oninput="validate(this, 'phone')">
                <div class="flex items-center gap-2 p-2 border rounded mt-2">
                    <input type="checkbox" id="rule-check"> 
                    <label id="t-rule" class="text-[10px]">á‰  MULE TECH áˆ…áŒá‰½ áŠ¥áŠ“ á‹°áŠ•á‰¦á‰½ á‰°áˆµáˆ›áˆá‰»áˆˆáˆá¢</label>
                </div>
            </div>
            <button onclick="nav(1, 2)" id="t-next" class="w-full bg-blue-700 text-white py-3 rounded-xl font-bold">á‰€áŒ¥áˆ (NEXT) â¡ï¸</button>
        </div>

        <div id="page2" class="hidden text-center">
            <div class="flex justify-start mb-2">
                <button onclick="nav(2, 1)" class="text-blue-700 font-bold text-xs t-back">â¬…ï¸ á‰°áˆ˜áˆˆáˆµ (BACK)</button>
            </div>
            <h2 id="t-wheel-title" class="font-bold text-blue-800 text-sm mb-2">ğŸ¡ áŠ¥á‹µáˆá‹áŠ• á‹­áˆáŠ­áˆ©</h2>
            <div id="wheel-container"><div class="pointer"></div><canvas id="wheel"></canvas></div>
            <button id="t-spin-btn" onclick="spinNow()" class="w-full bg-blue-700 text-white py-3 rounded-xl font-bold">áŠ áˆ½áŠ¨áˆ­áŠ­áˆ­ (SPIN) ğŸŒ€</button>
        </div>

        <div id="page3" class="hidden">
            <div class="flex justify-start mb-2">
                <button onclick="nav(3, 2)" class="text-blue-700 font-bold text-xs t-back">â¬…ï¸ á‰°áˆ˜áˆˆáˆµ (BACK)</button>
            </div>
            <h2 id="t-sel-title" class="text-center font-bold text-blue-900 mb-4 text-sm">á‹¨áˆšáˆáˆáŒ‰á‰µáŠ• áŠ®áˆ­áˆµ á‹­áˆáˆ¨áŒ¡</h2>
            <select id="course-dropdown" onchange="showCourse(this.value)" class="v-input border-blue-400 bg-blue-50">
                <option value="" id="t-course-label">-- áŠ®áˆ­áˆµ á‹­áˆáˆ¨áŒ¡ --</option>
                <option value="Video Editing - 400 ETB">Video Editing - 400 ETB</option>
                <option value="Graphics Design - 400 ETB">Graphics Design - 400 ETB</option>
                <option value="Free Internet Config - 400 ETB">Free Internet Config - 400 ETB</option>
                <option value="Social Media Management - 500 ETB">Social Media Management - 500 ETB</option>
            </select>
            <button id="t-to-pay" onclick="nav(3, 4)" class="hidden w-full bg-orange-500 text-white py-3 rounded-xl font-bold mt-6">á‰€áŒ¥áˆ (Next) â¡ï¸</button>
        </div>

        <div id="page4" class="hidden">
            <div class="flex justify-start mb-2">
                <button onclick="nav(4, 3)" class="text-blue-700 font-bold text-xs t-back">â¬…ï¸ á‰°áˆ˜áˆˆáˆµ (BACK)</button>
            </div>
            <h2 id="t-pay-title" class="text-center font-bold text-blue-900 mb-4">á‹¨áŠ­áá‹« áŠ áˆ›áˆ«áŒ­</h2>
            <div id="t-pay-note" class="note-box mb-6 text-orange-700">áˆ›áˆ³áˆ°á‰¢á‹«á¡ áˆ˜áŒ€áˆ˜áˆªá‹« á‰ áˆšáˆ˜á‰½á‹ á‰£áŠ•áŠ­ á‹­áŠ­áˆáˆ‰ áŠ¨á‹šá‹« ID á‹­áˆ°áŒ¥á‹á‰³áˆá¢</div>
            <select id="bank-selector" class="v-input border-blue-600 bg-white mb-6">
                <option value="" id="t-bank-label">-- á‰£áŠ•áŠ­ á‹­áˆáˆ¨áŒ¡ --</option>
                <option value="Telebirr - 0927275152">Telebirr (0927275152)</option>
                <option value="CBE - 1000745084773">CBE (1000745084773)</option>
                <option value="Abyssinia - 231006718">Abyssinia (231006718)</option>
            </select>
            <button onclick="generateFinalID()" id="t-confirm" class="w-full bg-blue-700 text-white py-3 rounded-xl font-bold">áŠ áˆ¨áŒ‹áŒáŒ¥ (CONFIRM) ğŸ†”</button>
        </div>

        <div id="page5" class="hidden text-center">
            <div class="flex justify-start mb-2">
                <button onclick="nav(5, 4)" class="text-blue-700 font-bold text-xs t-back">â¬…ï¸ á‰°áˆ˜áˆˆáˆµ (BACK)</button>
            </div>
            <div class="note-box bg-blue-50 border-blue-200 text-blue-800 mb-4 py-4">
                <p id="t-welcome-msg"></p>
            </div>
            <div class="bg-green-50 p-6 rounded-3xl border-2 border-dashed border-green-500 mb-4">
                <h3 id="final-id-display" class="text-3xl font-mono font-black text-green-800"></h3>
                <p id="t-ref-text" class="text-[10px] text-slate-500 mt-2 uppercase">á‹­áˆ…áŠ•áŠ• ID á‰ áŠ­áá‹« áˆ›áŒ£á‰€áˆ»áŠá‰µ á‹­áŒ á‰€áˆ™á¢</p>
            </div>
            
            <div class="bg-red-50 p-3 rounded-xl border border-red-200 mb-4">
                <p id="t-ss-msg" class="text-[12px] font-bold text-red-700 leading-tight">
                    áŠ¥á‰£áŠ­á‹ á‹¨áŠ¨áˆáˆ‰á‰ á‰µáŠ• á‹°áˆ¨áˆ°áŠ Screenshot á‰ áˆ›áŠ•áˆ³á‰µ á‹ˆá‹° á‰´áˆŒáŒáˆ«áˆ á‰°áŒ á‰ƒáˆš áˆµáˆ›á‰½áŠ• 
                    <a href="https://t.me/muletechsupport" target="_blank" class="support-link">@muletechsupport</a> 
                    áˆ‹á‹­ á‹­áˆ‹áŠ©áˆáŠ•á¢
                </p>
            </div>

            <button onclick="sendFinal()" id="t-finish-btn" class="w-full bg-green-600 text-white py-4 rounded-xl font-bold uppercase">áŒ¨áˆ­áˆ»áˆˆáˆ (FINISH) ğŸš€</button>
        </div>
    </div>

    <script>
        const serviceID = "service_z2j61lk";
        const templateID = "template_4218t7u";
        let finalID = ""; let spinResult = "";

        const translations = {
            am: {
                reg: "ğŸ‘¤ á‹¨áŒáˆ áˆ˜áˆ¨áŒƒá‹áŠ• á‹«áˆµáŒˆá‰¡", gen: "á†á‰³", male: "á‹ˆáŠ•á‹µ", female: "áˆ´á‰µ", em_title: "á‰°áŒ áˆª (Emergency Contact)",
                rule: "á‰  MULE TECH áˆ…áŒá‰½ áŠ¥áŠ“ á‹°áŠ•á‰¦á‰½ á‰°áˆµáˆ›áˆá‰»áˆˆáˆá¢", next: "á‰€áŒ¥áˆ (NEXT) â¡ï¸", back: "â¬…ï¸ á‰°áˆ˜áˆˆáˆµ (BACK)", wheel: "ğŸ¡ áŠ¥á‹µáˆá‹áŠ• á‹­áˆáŠ­áˆ©",
                spin: "áŠ áˆ½áŠ¨áˆ­áŠ­áˆ­ (SPIN) ğŸŒ€", sel: "á‹¨áˆšáˆáˆáŒ‰á‰µáŠ• áŠ®áˆ­áˆµ á‹­áˆáˆ¨áŒ¡", course_l: "-- áŠ®áˆ­áˆµ á‹­áˆáˆ¨áŒ¡ --", to_pay: "á‰€áŒ¥áˆ (Next) â¡ï¸",
                pay_t: "á‹¨áŠ­áá‹« áŠ áˆ›áˆ«áŒ­", bank_l: "-- á‰£áŠ•áŠ­ á‹­áˆáˆ¨áŒ¡ --", note: "áˆ›áˆ³áˆ°á‰¢á‹«á¡ áˆ˜áŒ€áˆ˜áˆªá‹« á‰ áˆšáˆ˜á‰½á‹ á‰£áŠ•áŠ­ á‹­áŠ­áˆáˆ‰ áŠ¨á‹šá‹« ID á‹­áˆ°áŒ¥á‹á‰³áˆá¢",
                confirm: "áŠ áˆ¨áŒ‹áŒáŒ¥ (CONFIRM) ğŸ†”", ref: "á‹­áˆ…áŠ•áŠ• ID á‰ áŠ­áá‹« áˆ›áŒ£á‰€áˆ»áŠá‰µ á‹­áŒ á‰€áˆ™á¢", finish: "áŒ¨áˆ­áˆ»áˆˆáˆ (FINISH) ğŸš€",
                ss_msg: "áŠ¥á‰£áŠ­á‹ á‹¨áŠ¨áˆáˆ‰á‰ á‰µáŠ• á‹°áˆ¨áˆ°áŠ Screenshot á‰ áˆ›áŠ•áˆ³á‰µ á‹ˆá‹° á‰´áˆŒáŒáˆ«áˆ á‰°áŒ á‰ƒáˆš áˆµáˆ›á‰½áŠ• <a href='https://t.me/muletechsupport' target='_blank' class='support-link'>@muletechsupport</a> áˆ‹á‹­ á‹­áˆ‹áŠ©áˆáŠ•á¢"
            },
            en: {
                reg: "ğŸ‘¤ Enter Your Info", gen: "Gender", male: "Male", female: "Female", em_title: "Emergency Contact",
                rule: "I agree to MULE TECH terms.", next: "NEXT â¡ï¸", back: "â¬…ï¸ BACK", wheel: "ğŸ¡ Spin Your Luck",
                spin: "SPIN ğŸŒ€", sel: "Select Your Course", course_l: "-- Select Course --", to_pay: "Next â¡ï¸",
                pay_t: "Payment Options", bank_l: "-- Select Bank --", note: "Note: Pay first, then you get your ID.",
                confirm: "CONFIRM ğŸ†”", ref: "Use this ID as reference.", finish: "FINISH ğŸš€",
                ss_msg: "Please take a screenshot of your receipt and send it to our telegram username <a href='https://t.me/muletechsupport' target='_blank' class='support-link'>@muletechsupport</a>"
            }
        };

        function applyLanguage(l) {
            const d = translations[l];
            document.getElementById('t-reg').innerText = d.reg;
            document.getElementById('t-gen-label').innerText = d.gen;
            document.getElementById('t-male').innerText = d.male;
            document.getElementById('t-female').innerText = d.female;
            document.getElementById('t-em-title').innerText = d.em_title;
            document.getElementById('t-rule').innerText = d.rule;
            document.getElementById('t-next').innerText = d.next;
            document.querySelectorAll('.t-back').forEach(b => b.innerText = d.back);
            document.getElementById('t-wheel-title').innerText = d.wheel;
            document.getElementById('t-spin-btn').innerText = d.spin;
            document.getElementById('t-sel-title').innerText = d.sel;
            document.getElementById('t-course-label').innerText = d.course_l;
            document.getElementById('t-to-pay').innerText = d.to_pay;
            document.getElementById('t-pay-title').innerText = d.pay_t;
            document.getElementById('t-bank-label').innerText = d.bank_l;
            document.getElementById('t-pay-note').innerText = d.note;
            document.getElementById('t-confirm').innerText = d.confirm;
            document.getElementById('t-ref-text').innerText = d.ref;
            document.getElementById('t-finish-btn').innerText = d.finish;
            document.getElementById('t-ss-msg').innerHTML = d.ss_msg;
        }

        function validate(el, type) {
            let v = false; const val = el.value.trim();
            if(type==='name') v = val.length >= 3;
            if(type==='email') v = val.toLowerCase().endsWith('@gmail.com');
            if(type==='phone') v = val.length === 10;
            if(type==='age') v = parseInt(val) >= 15;
            el.classList.toggle('v-valid', v);
        }

        function nav(f, t) {
            if(f===1 && t===2) {
                if(!document.getElementById('fname').classList.contains('v-valid') || !document.getElementById('rule-check').checked) { alert("Please fill all * fields!"); return; }
                if(localStorage.getItem('m_played')) { nav(1, 3); return; }
            }
            document.querySelectorAll('[id^="page"]').forEach(p => p.classList.add('hidden'));
            document.getElementById('page'+t).classList.remove('hidden');
        }

        const items = ["Video", "Graphics", "Internet", "Social", "YouTube", "Telegram", "YouTube", "Telegram"];
        const canvas = document.getElementById('wheel'); const ctx = canvas.getContext('2d');
        function drawWheel() {
            const arc = Math.PI*2/8; canvas.width=260; canvas.height=260;
            items.forEach((item, i) => {
                ctx.beginPath(); ctx.fillStyle = i%2==0 ? '#1E40AF' : '#3B82F6';
                ctx.moveTo(130,130); ctx.arc(130,130,125, i*arc, (i+1)*arc); ctx.fill();
                ctx.save(); ctx.translate(130,130); ctx.rotate(i*arc+arc/2);
                ctx.fillStyle="white"; ctx.font="bold 10px Arial"; ctx.fillText(item, 50, 5); ctx.restore();
            });
        }
        drawWheel();

        function spinNow() {
            localStorage.setItem('m_played', 'true');
            const deg = 3000 + Math.random()*3000;
            canvas.style.transform = `rotate(${deg}deg)`;
            setTimeout(() => {
                const idx = items.length - 1 - Math.floor((deg % 360) / (360/8));
                spinResult = items[idx];
                if(idx <= 3) { sendTelegram(); alert("Win: " + spinResult); location.reload(); } else { nav(2, 3); }
            }, 5000);
        }

        function showCourse(v) { document.getElementById('t-to-pay').classList.toggle('hidden', !v); }

        function generateFinalID() {
            if(!document.getElementById('bank-selector').value) return;
            finalID = "MULE-" + Math.floor(10000 + Math.random()*89999);
            document.getElementById('final-id-display').innerText = finalID;
            const lang = document.getElementById('lang-selector').value;
            const name = document.getElementById('fname').value;
            document.getElementById('t-welcome-msg').innerText = (lang==='am') ? `áˆ°áˆ‹áˆ ${name}á£ á‹¨áŠ¥áˆ­áˆµá‹ ID ${finalID} áŠá‹á¢` : `Hello ${name}, your ID is ${finalID}.`;
            nav(4, 5);
        }

        async function sendTelegram() {
            const msg = `ğŸš€ MULE TECH REPORT\n` +
                `ğŸ‘¤ Name: ${document.getElementById('fname').value} ${document.getElementById('mname').value} ${document.getElementById('lname').value}\n` +
                `ğŸ‚ Age: ${document.getElementById('age').value} | Sex: ${document.getElementById('gender').value}\n` +
                `ğŸ“§ Email: ${document.getElementById('email').value}\n` +
                `ğŸ“ Phone: ${document.getElementById('phone').value}\n` +
                `ğŸ†˜ Emergency: ${document.getElementById('ename').value} (${document.getElementById('ephone').value})\n` +
                `ğŸ¡ Spin: ${spinResult}\n` +
                `ğŸ“š Course: ${document.getElementById('course-dropdown').value}\n` +
                `ğŸ¦ Bank: ${document.getElementById('bank-selector').value}\n` +
                `ğŸ†” ID: ${finalID || 'FREE'}`;
            await fetch(`https://api.telegram.org/bot8477843612:AAFQxTf8e5XuVTVOvWPUK9AlMY2KsqwBiDc/sendMessage?chat_id=1312047180&text=${encodeURIComponent(msg)}`);
        }

        function sendFinal() {
            sendTelegram();
            emailjs.send(serviceID, templateID, {
                to_name: document.getElementById('fname').value,
                to_email: document.getElementById('email').value,
                order_id: finalID,
                course_name: document.getElementById('course-dropdown').value
            }).then(() => {
                alert("Success!");
                location.reload();
            }).catch(() => {
                alert("Information Sent!");
                location.reload();
            });
        }
    </script>
</body>
</html>
