<!DOCTYPE html>
<html lang="am">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MULE TECH | Advanced Portal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .hidden { display: none; }
        #wheel-container { position: relative; width: 260px; height: 260px; margin: 10px auto; }
        #wheel { width: 100%; height: 100%; border-radius: 50%; border: 5px solid #1E40AF; transition: transform 5s cubic-bezier(0.15, 0, 0.15, 1); }
        .pointer { position: absolute; top: -5px; left: 50%; transform: translateX(-50%); width: 25px; height: 25px; background: #EF4444; clip-path: polygon(50% 100%, 0 0, 100% 0); z-index: 20; }
        
        /* Validation Styles */
        .v-field { position: relative; width: 100%; }
        .v-input { width: 100%; padding: 12px; border: 2px solid #ef4444; border-radius: 12px; outline: none; transition: 0.3s; background: #fef2f2; }
        .v-valid { border-color: #10b981 !important; background: #f0fdf4 !important; }
        .check-mark { position: absolute; right: 12px; top: 50%; transform: translateY(-50%); display: none; color: #10b981; font-weight: bold; }
        
        .gold-header { color: #FFD700; font-weight: 900; font-size: 2.5rem; text-transform: uppercase; text-align: center; text-shadow: 2px 2px 4px rgba(0,0,0,0.2); }
    </style>
</head>
<body class="bg-slate-100 min-h-screen flex items-center justify-center p-4 font-sans">

    <div class="max-w-md w-full bg-white rounded-[2.5rem] shadow-2xl p-6 border-t-[10px] border-blue-700">
        
        <div class="text-center mb-4">
            <h1 class="gold-header">MULE TECH</h1>
            <select id="lang-selector" onchange="applyLanguage(this.value)" class="mt-2 bg-blue-50 text-blue-800 font-bold p-1 rounded-lg text-xs outline-none">
                <option value="am">áŠ áˆ›áˆ­áŠ›</option>
                <option value="en">English</option>
                <option value="or">Afaan Oromoo</option>
                <option value="tg">á‰µáŒáˆ­áŠ›</option>
            </select>
        </div>

        <div id="page1" class="space-y-3">
            <h2 id="t-reg" class="font-bold text-center text-slate-700">ğŸ‘¤ á‹¨áŒáˆ áˆ˜áˆ¨áŒƒá‹áŠ• á‹«áˆµáŒˆá‰¡</h2>
            <div class="h-[380px] overflow-y-auto px-1 space-y-3">
                <div class="v-field"><input type="text" id="fname" placeholder="First Name *" class="v-input" oninput="validate(this, 'name')"><span class="check-mark">âœ…</span></div>
                <div class="v-field"><input type="text" id="mname" placeholder="Father Name *" class="v-input" oninput="validate(this, 'name')"><span class="check-mark">âœ…</span></div>
                <div class="v-field"><input type="text" id="lname" placeholder="Grandfather Name *" class="v-input" oninput="validate(this, 'name')"><span class="check-mark">âœ…</span></div>
                <div class="flex gap-2">
                    <div class="v-field w-1/3"><input type="number" id="age" placeholder="Age" class="v-input" oninput="validate(this, 'age')"><span class="check-mark">âœ…</span></div>
                    <select id="gender" class="v-input w-2/3 border-slate-300 bg-white" onchange="this.classList.add('v-valid')">
                        <option value="" id="t-gen">Gender</option>
                        <option value="Male">Male</option>
                        <option value="Female">Female</option>
                    </select>
                </div>
                <div class="v-field"><input type="email" id="email" placeholder="example@gmail.com *" class="v-input" oninput="validate(this, 'email')"><span class="check-mark">âœ…</span></div>
                <div class="v-field"><input type="text" id="phone" placeholder="Phone (09/07...)" maxlength="10" class="v-input" oninput="validate(this, 'phone')"><span class="check-mark">âœ…</span></div>
                <p class="text-[10px] font-bold text-blue-600 uppercase pt-2">Emergency Contact</p>
                <div class="v-field"><input type="text" id="ename" placeholder="Contact Name *" class="v-input" oninput="validate(this, 'name')"><span class="check-mark">âœ…</span></div>
                <div class="v-field"><input type="text" id="ephone" placeholder="Contact Phone *" maxlength="10" class="v-input" oninput="validate(this, 'phone')"><span class="check-mark">âœ…</span></div>
            </div>
            <button onclick="nav(1, 2)" id="t-next" class="w-full bg-blue-700 text-white py-3 rounded-xl font-bold">NEXT â¡ï¸</button>
        </div>

        <div id="page2" class="hidden text-center">
            <div class="flex justify-between mb-2"><button onclick="nav(2, 1)" class="text-blue-700 font-bold">â¬…ï¸ Back</button></div>
            <h2 id="t-wheel" class="font-bold text-blue-800">ğŸ¡ áŠ¥á‹µáˆá‹áŠ• á‹­áˆáŠ­áˆ©</h2>
            <div id="wheel-container"><div class="pointer"></div><canvas id="wheel"></canvas></div>
            <button id="spin-btn" onclick="spinNow()" class="w-full bg-blue-700 text-white py-3 rounded-xl font-bold">SPIN ğŸŒ€</button>
        </div>

        <div id="page3" class="hidden">
            <div class="flex justify-between mb-4">
                <button onclick="nav(3, 2)" id="back-to-wheel" class="text-blue-700 font-bold">â¬…ï¸ Back</button>
                <button onclick="nav(3, 4)" class="text-blue-700 font-bold">Next â¡ï¸</button>
            </div>
            <h2 id="t-res-title" class="text-xl font-bold text-center text-blue-900 mb-4">áˆáˆ­áŒ«á‹áŠ• á‹«áŒ áŠ“á‰…á‰</h2>
            <select id="course-dropdown" onchange="showCourse(this.value)" class="v-input border-blue-400 bg-blue-50">
                <option value="">-- Select Course --</option>
                <option value="Video Editing">Video Editing (400 ETB)</option>
                <option value="Graphics Design">Graphics Design (400 ETB)</option>
                <option value="Free Internet">Free Internet (400 ETB)</option>
                <option value="Social Management">Social Media (500 ETB)</option>
            </select>
            <div id="course-box" class="hidden p-4 bg-slate-50 border rounded-xl my-4 text-sm font-bold">
                <p id="c-name" class="text-blue-800"></p>
                <p>Price: <span id="c-price"></span> ETB</p>
            </div>
            <button id="to-p4-btn" onclick="nav(3, 4)" class="hidden w-full bg-orange-500 text-white py-3 rounded-xl font-bold mt-4">Next ğŸ’³</button>
        </div>

        <div id="page4" class="hidden">
            <div class="flex justify-between mb-4"><button onclick="nav(4, 3)" class="text-blue-700 font-bold">â¬…ï¸ Back</button></div>
            <h2 id="t-pay" class="text-xl font-bold text-center text-blue-900 mb-4">á‹¨áŠ­áá‹« áŠ áˆ›áˆ«áŒ­ á‹­áˆáˆ¨áŒ¡</h2>
            <select id="bank-selector" class="v-input border-blue-600 bg-white mb-6">
                <option value="">-- Select Bank --</option>
                <option value="Telebirr - 0927275152">Telebirr (0927275152)</option>
                <option value="CBE - 1000745084773">CBE (1000745084773)</option>
                <option value="Abyssinia - 231006718">Abyssinia (231006718)</option>
            </select>
            <button onclick="generateFinalID()" class="w-full bg-blue-700 text-white py-3 rounded-xl font-bold">Confirm & Get ID ğŸ†”</button>
        </div>

        <div id="page5" class="hidden text-center">
            <div class="flex justify-between mb-4"><button onclick="nav(5, 4)" class="text-blue-700 font-bold">â¬…ï¸ Back</button></div>
            <h2 class="text-xl font-bold text-blue-900 mb-2">âœ… á‰µá‹•á‹›á‹á‹ á‰°á‹­á‹Ÿáˆ</h2>
            <div class="bg-green-50 p-6 rounded-3xl border-2 border-dashed border-green-500 mb-6">
                <p class="text-xs text-green-700 font-bold uppercase">Your Final Order ID:</p>
                <h3 id="final-id" class="text-4xl font-mono font-black text-green-800 my-2"></h3>
                <p id="t-finish-msg" class="text-[10px] text-slate-500">á‹­áˆ…áŠ•áŠ• ID á‰ áŠ­áá‹« áˆ›áŒ£á‰€áˆ»áŠá‰µ á‹­áŒ á‰€áˆ™á¢</p>
            </div>
            <button onclick="sendReport()" class="w-full bg-green-600 text-white py-4 rounded-xl font-bold shadow-lg">FINISH & SEND ğŸš€</button>
        </div>
    </div>

    <script>
        // Check Wheel Visibility
        window.onload = () => { if(localStorage.getItem('mule_played')) document.getElementById('back-to-wheel').style.display='none'; }

        function validate(el, type) {
            let v = false;
            const val = el.value.trim();
            if(type === 'name') v = val.length >= 3;
            if(type === 'email') v = val.toLowerCase().endsWith('@gmail.com') && val.length > 10;
            if(type === 'phone') v = val.length === 10 && (val.startsWith('09') || val.startsWith('07'));
            if(type === 'age') v = parseInt(val) >= 15 && parseInt(val) <= 50;

            el.classList.toggle('v-valid', v);
            el.parentElement.querySelector('.check-mark').style.display = v ? 'block' : 'none';
        }

        function nav(f, t) {
            if(f === 1 && t === 2) {
                const inputs = document.querySelectorAll('#page1 .v-input');
                let allOk = true;
                inputs.forEach(i => { if(!i.classList.contains('v-valid')) { i.classList.remove('v-valid'); allOk = false; }});
                if(!allOk) { alert("Please fill all fields correctly (Red ones)"); return; }
                if(localStorage.getItem('mule_played')) { nav(1, 3); return; }
            }
            document.getElementById('page'+f).classList.add('hidden');
            document.getElementById('page'+t).classList.remove('hidden');
        }

        // Wheel Logic
        const canvas = document.getElementById('wheel');
        const ctx = canvas.getContext('2d');
        const items = ["Video Editing", "Graphics Design", "Free Internet", "Social Media", "YouTube Sub", "Telegram Join", "YouTube Sub", "Telegram Join"];
        function drawWheel() {
            const arc = (Math.PI*2)/items.length; canvas.width=260; canvas.height=260;
            items.forEach((item, i) => {
                ctx.beginPath(); ctx.fillStyle = i%2==0 ? '#1E40AF' : '#3B82F6';
                ctx.moveTo(130,130); ctx.arc(130,130,125, i*arc, (i+1)*arc); ctx.fill();
                ctx.save(); ctx.translate(130,130); ctx.rotate(i*arc+arc/2);
                ctx.fillStyle="white"; ctx.font="bold 9px Arial"; ctx.fillText(item, 50, 5); ctx.restore();
            });
        }
        drawWheel();

        let spinResult = "";
        function spinNow() {
            localStorage.setItem('mule_played', 'true');
            const deg = Math.floor(3000 + Math.random()*3000);
            canvas.style.transform = `rotate(${deg}deg)`;
            document.getElementById('spin-btn').disabled = true;
            setTimeout(() => {
                const idx = items.length - 1 - Math.floor((deg % 360) / (360/items.length));
                spinResult = items[idx];
                nav(2, 3);
                document.getElementById('t-res-title').innerText = "Winner: " + spinResult;
            }, 5000);
        }

        function showCourse(v) {
            const box = document.getElementById('course-box');
            if(v) {
                box.classList.remove('hidden');
                document.getElementById('to-p4-btn').classList.remove('hidden');
                document.getElementById('c-name').innerText = v;
                document.getElementById('c-price').innerText = v === "Social Management" ? "500" : "400";
            } else { box.classList.add('hidden'); }
        }

        let finalID = "";
        function generateFinalID() {
            if(!document.getElementById('bank-selector').value) { alert("Select Bank!"); return; }
            finalID = "MULE-" + Math.floor(10000 + Math.random() * 89999);
            document.getElementById('final-id').innerText = finalID;
            nav(4, 5);
        }

        async function sendReport() {
            const msg = `ğŸš€ NEW MULE TECH ORDER\n\n` +
                `ğŸ‘¤ Name: ${document.getElementById('fname').value} ${document.getElementById('mname').value} ${document.getElementById('lname').value}\n` +
                `ğŸ‚ Age: ${document.getElementById('age').value} | Gender: ${document.getElementById('gender').value}\n` +
                `ğŸ“§ Email: ${document.getElementById('email').value}\n` +
                `ğŸ“ Phone: ${document.getElementById('phone').value}\n` +
                `ğŸ†˜ Emergency: ${document.getElementById('ename').value} (${document.getElementById('ephone').value})\n` +
                `ğŸ¡ Spin: ${spinResult}\n` +
                `ğŸ“š Course: ${document.getElementById('course-dropdown').value}\n` +
                `ğŸ¦ Bank: ${document.getElementById('bank-selector').value}\n` +
                `ğŸ†” ORDER ID: ${finalID}`;

            await fetch(`https://api.telegram.org/bot8477843612:AAFQxTf8e5XuVTVOvWPUK9AlMY2KsqwBiDc/sendMessage?chat_id=1312047180&text=${encodeURIComponent(msg)}`);
            alert("Sent Successfully! ID: " + finalID);
            location.reload();
        }

        const trans = {
            am: { t_reg: "ğŸ‘¤ á‹¨áŒáˆ áˆ˜áˆ¨áŒƒá‹áŠ• á‹«áˆµáŒˆá‰¡", t_next: "á‰€áŒ¥áˆ â¡ï¸", t_wheel: "ğŸ¡ áŠ¥á‹µáˆá‹áŠ• á‹­áˆáŠ­áˆ©", t_pay: "á‹¨áŠ­áá‹« áŠ áˆ›áˆ«áŒ­ á‹­áˆáˆ¨áŒ¡", t_finish_msg: "á‹­áˆ…áŠ•áŠ• ID á‰ áŠ­áá‹« áˆ›áŒ£á‰€áˆ»áŠá‰µ á‹­áŒ á‰€áˆ™á¢" },
            en: { t_reg: "ğŸ‘¤ Personal Information", t_next: "NEXT â¡ï¸", t_wheel: "ğŸ¡ Spin Your Luck", t_pay: "Select Payment Bank", t_finish_msg: "Use this ID as payment reference." }
        };
        function applyLanguage(l) {
            const d = trans[l] || trans.am;
            document.getElementById('t-reg').innerText = d.t_reg;
            document.getElementById('t-next').innerText = d.t_next;
            document.getElementById('t-wheel').innerText = d.t_wheel;
            document.getElementById('t-pay').innerText = d.t_pay;
        }
    </script>
</body>
</html>
